<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cuk-iso-ps &mdash; ResPCBs v0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=4c0d86c8"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pynq-rpi-ph-adapter" href="pynq_rpi_ph_adapter.html" />
    <link rel="prev" title="digital-isolator-6t2r" href="digital_isolator_6t2r.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ResPCBs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Amplifiers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="amplifier_board_six_channels.html">amplifier-board-six-channels</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analog-to-digital converters (ADCs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="adc_board_six_channels.html">adc-board-six-channels</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Digital isolators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="digital_isolator_2t6r.html">digital-isolator-2t6r</a></li>
<li class="toctree-l1"><a class="reference internal" href="digital_isolator_6t2r.html">digital-isolator-6t2r</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Experimental converters</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">cuk-iso-ps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converter-and-board-pinout">Converter and board pinout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#powering-the-board">Powering the board</a></li>
<li class="toctree-l2"><a class="reference internal" href="#models">Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ltspice-model">LTSpice model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plecs-model">PLECS model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#issues-and-notes">Issues and notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fabrication-files">Fabrication files</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pynq Z2 adapter</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pynq_rpi_ph_adapter.html">pynq-rpi-ph-adapter</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ResPCBs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">cuk-iso-ps</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cuk_iso_ps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cuk-iso-ps">
<span id="sec-cuk-iso-ps"></span><h1>cuk-iso-ps<a class="headerlink" href="#cuk-iso-ps" title="Permalink to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> is a PCB used to assemble an isolated Ćuk converter, meant to be used as an experimental platform for research and teaching in control in power electronics. Assembling  one converter requires two <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> PCBs and a high-frequency transformer.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>A diagram of an isolated Ćuk converter is shown in <a class="reference internal" href="#fig-cuk-iso-ps-diagram"><span class="std std-numref">Fig. 30</span></a>.</p>
<figure class="align-center" id="fig-cuk-iso-ps-diagram">
<a class="reference internal image-reference" href="_images/cuk-iso-diagram.svg"><img alt="Diagram of the isolated Ćuk." height="119" src="_images/cuk-iso-diagram.svg" width="575" /></a>
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Diagram of the isolated Ćuk converter.</span><a class="headerlink" href="#fig-cuk-iso-ps-diagram" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>To ease routing of the PCB and have flexibility with respect to the transformer, the converter is implemented with two PCBs, one for each side (primary and secondary). However, because the topology is symmetric, the same PCB can be used for both sides. A simplified diagram of one side is shown in <a class="reference internal" href="#fig-cuk-iso-ps-diagram-simplified"><span class="std std-numref">Fig. 31</span></a>. On the left, <span class="math notranslate nohighlight">\(V_\text{dc}\)</span> is the voltage of the dc link, which can be either the input or output voltage, depending if the board is used for the primary or secondary side. On the right, the board is connected to a high-frequency transformer. (The polarity of the transformer must match the polarity shown in <a class="reference internal" href="#fig-cuk-iso-ps-diagram"><span class="std std-numref">Fig. 30</span></a>.)</p>
<figure class="align-center" id="fig-cuk-iso-ps-diagram-simplified">
<a class="reference internal image-reference" href="_images/cuk-iso-diagram-simplified.svg"><img alt="Simplified diagram of ``cuk-iso-ps``." height="119" src="_images/cuk-iso-diagram-simplified.svg" width="280" /></a>
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Simplified diagram of the <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> board.</span><a class="headerlink" href="#fig-cuk-iso-ps-diagram-simplified" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The full diagram of the board, including measurements and switches, is shown in <a class="reference internal" href="#fig-cuk-iso-ps-diagram-full"><span class="std std-numref">Fig. 32</span></a>. On the far left, <span class="math notranslate nohighlight">\(v_\text{io}\)</span> is the input/output voltage, depending if the board is for the primary or secondary side. On the far right, <span class="math notranslate nohighlight">\(v_\text{T}\)</span> is the connection to the high-frequency transformer.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> board is controlled with switches <span class="math notranslate nohighlight">\(S_\text{L}\)</span>, <span class="math notranslate nohighlight">\(S_\text{io}\)</span>, and <span class="math notranslate nohighlight">\(S_\text{c}\)</span>. Switch <span class="math notranslate nohighlight">\(S_\text{L}\)</span> is a low-side switch that can be used to switch a load to the output. This can be used to emulate load steps. Switch <span class="math notranslate nohighlight">\(S_\text{io}\)</span> is a high-side switch that can be used to disconnect the converter from its input/output. It was primarily meant to also emulate load steps, or, in case of faults, disconnecting the converter from its input or load. Switch <span class="math notranslate nohighlight">\(S_\text{c}\)</span> is the main Ćuk switch.</p>
<figure class="align-center" id="fig-cuk-iso-ps-diagram-full">
<a class="reference internal image-reference" href="_images/cuk-iso-diagram-full.svg"><img alt="Full diagram of ``cuk-iso-ps``." height="129" src="_images/cuk-iso-diagram-full.svg" width="533" /></a>
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">Full diagram of the <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> board.</span><a class="headerlink" href="#fig-cuk-iso-ps-diagram-full" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The converter is monitored with three voltage sensors and two current sensors. The input (or output) voltage of the board is monitored with sensors <span class="math notranslate nohighlight">\(v_\text{io}\)</span> and <span class="math notranslate nohighlight">\(v_\text{dc}\)</span>. While <span class="math notranslate nohighlight">\(v_\text{dc}\)</span> measures the voltage across the dc-link capacitor, <span class="math notranslate nohighlight">\(v_\text{io}\)</span> measures the voltage after the <span class="math notranslate nohighlight">\(S_\text{io}\)</span> switch. When the switch is closed, both measurements are the same. The voltage of the coupling capacitor is monitored with sensor <span class="math notranslate nohighlight">\(v_\text{cc}\)</span>. The input (or output) current of the converter is measured with sensor <span class="math notranslate nohighlight">\(i_\text{io}\)</span>, and the inductor current is monitored with sensor <span class="math notranslate nohighlight">\(i_\text{L}\)</span>.</p>
</section>
<section id="converter-and-board-pinout">
<h2>Converter and board pinout<a class="headerlink" href="#converter-and-board-pinout" title="Permalink to this heading"></a></h2>
<p><a class="reference internal" href="#fig-cuk-iso-ps-board"><span class="std std-numref">Fig. 33</span></a> shows the assembled converter, using two <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> boards and a high-frequency transformer. The bottom PCB is the primary side (input), while the top PCB is the secondary side (output). The pinout of the signal connectors is shown in <a class="reference internal" href="#fig-cuk-iso-ps-pinout-signal-j7"><span class="std std-numref">Fig. 34</span></a>, <a class="reference internal" href="#fig-cuk-iso-ps-pinout-signal-j8"><span class="std std-numref">Fig. 35</span></a>, and <a class="reference internal" href="#fig-cuk-iso-ps-pinout-signal-j9"><span class="std std-numref">Fig. 36</span></a>. Connectors <code class="docutils literal notranslate"><span class="pre">J7</span></code> and <code class="docutils literal notranslate"><span class="pre">J8</span></code> have the measurement signals, while  <code class="docutils literal notranslate"><span class="pre">J9</span></code> contains the signals for the actuators. Connectors <code class="docutils literal notranslate"><span class="pre">J7</span></code> and <code class="docutils literal notranslate"><span class="pre">J8</span></code> provide the same set of measurements; the difference is that all measurements in connector <code class="docutils literal notranslate"><span class="pre">J8</span></code> are filtered.</p>
<figure class="align-center" id="fig-cuk-iso-ps-board">
<a class="reference internal image-reference" href="_images/board1.svg"><img alt="Cuk converter assembled from two ``cuk-iso-ps`` boards." height="329" src="_images/board1.svg" width="404" /></a>
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">Ćuk converter assembled from two <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps</span></code> boards.</span><a class="headerlink" href="#fig-cuk-iso-ps-board" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="fig-cuk-iso-ps-pinout-signal-j7">
<a class="reference internal image-reference" href="_images/pinout-signal-j7.svg"><img alt="Pinout of connector J7." height="201" src="_images/pinout-signal-j7.svg" width="641" /></a>
<figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">Pinout of connector J7.</span><a class="headerlink" href="#fig-cuk-iso-ps-pinout-signal-j7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="fig-cuk-iso-ps-pinout-signal-j8">
<a class="reference internal image-reference" href="_images/pinout-signal-j8.svg"><img alt="Pinout of connector J8." height="201" src="_images/pinout-signal-j8.svg" width="641" /></a>
<figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">Pinout of connector J8.</span><a class="headerlink" href="#fig-cuk-iso-ps-pinout-signal-j8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="fig-cuk-iso-ps-pinout-signal-j9">
<a class="reference internal image-reference" href="_images/pinout-signal-j9.svg"><img alt="Pinout of connector J9." height="201" src="_images/pinout-signal-j9.svg" width="641" /></a>
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">Pinout of connector J9.</span><a class="headerlink" href="#fig-cuk-iso-ps-pinout-signal-j9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="powering-the-board">
<h2>Powering the board<a class="headerlink" href="#powering-the-board" title="Permalink to this heading"></a></h2>
<p>The power stage and the electronics are powered separately. The range of the input voltage to the power stage depends mostly on the blocking characteristics of the power MOSFETs used.  However, the PCB has not been tested with more than 30 V at the input or output. It is also possible to use very low voltage levels at the input, for example, 2 V. Such low voltages can be used for debugging and calibration purposes.</p>
<p>The electronics is powered with 12 V. This voltage is directly used to power the gate drivers. Internally, a linear regulator uses the 12 V to create a 5 V rail. This rail is used to power the amplifiers and current sensors. Furthermore, the 5 V rail is connected to connectors <code class="docutils literal notranslate"><span class="pre">J7</span></code>, <code class="docutils literal notranslate"><span class="pre">J8</span></code>, and <code class="docutils literal notranslate"><span class="pre">J9</span></code>, so that adapter boards can be powered from the converter.</p>
</section>
<section id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this heading"></a></h2>
<p>Two models were built based on the assembled prototype: an LTSpice model and a PLECS model. The LTSpice model was used to design the converter and mainly see the voltage and current stress on the MOSFETs, and the effects of the snubber circuit. The PLECS model was built to support control design.</p>
<p>For the prototype, the following parts were used:</p>
<ul class="simple">
<li><p>Transformer: <a class="reference external" href="https://www.coilcraft.com/en-us/products/transformers/planar-transformers/planar/na5871/">NA5871-AL 800 W Planar Transformer</a>, <span class="math notranslate nohighlight">\(N\)</span>: 5/3</p></li>
<li><p>Input inductor (<span class="math notranslate nohighlight">\(L_1\)</span>): <a class="reference external" href="https://de.rs-online.com/web/p/smd-induktivitat/2585656?gb=b">Wurth Elektronik 74437429203101</a>, 100 uH</p></li>
<li><p>Output inductor (<span class="math notranslate nohighlight">\(L_2\)</span>): <a class="reference external" href="https://de.rs-online.com/web/p/smd-induktivitat/2585656?gb=b">Wurth Elektronik 74437429203151</a>, 150 uH</p></li>
<li><p>Coupling capacitors (<span class="math notranslate nohighlight">\(C_1\)</span>, <span class="math notranslate nohighlight">\(C_2\)</span>): <a class="reference external" href="https://de.rs-online.com/web/p/folienkondensatoren/8829367?gb=b">EPCOS B32674D4475K000</a>, 4.7 uF (two were placed in parallel, resulting in 9.4 uF for  <span class="math notranslate nohighlight">\(C_1\)</span> and <span class="math notranslate nohighlight">\(C_2\)</span>)</p></li>
<li><p>Input and output capacitors (<span class="math notranslate nohighlight">\(C_\text{o}\)</span>): <a class="reference external" href="https://de.rs-online.com/web/p/aluminium-elektrolytkondensatoren/7152192?gb=b">Nichicon UCS2C331MHD</a> 330 uF</p></li>
<li><p>Primary sides switch: N-channel MOSFET <a class="reference external" href="https://www.infineon.com/cms/de/product/power/mosfet/n-channel/irfb4227/">IRFB4227</a>, 200 V, 20 mOhms</p></li>
<li><p>Secondary side switch: N-channel MOSFET <a class="reference external" href="https://www.infineon.com/cms/de/product/power/mosfet/n-channel/irfb4127/">IRFB4127</a>, 200 V, 17 mOhms</p></li>
<li><p>Load switch: N-channel MOSFET <a class="reference external" href="https://de.rs-online.com/web/p/mosfet/8962366?gb=s">TK39A60W</a>, 600 V, 39 A, 65 mOhms</p></li>
<li><p>Snubber capacitor: <a class="reference external" href="https://www.murata.com/en-eu/products/productdetail?partno=GRM31A7U2J471JW31%23">Murata  GRM31A7U2J471JW31D</a>, 470pF, two in parallel (both sides)</p></li>
<li><p>Snubber resistors: 20 Ohms, 0207 package (both sides)</p></li>
</ul>
<p>Drivers</p>
<ul class="simple">
<li><p>Gate drivers for main switches and load switch: <a class="reference external" href="https://www.diodes.com/assets/Datasheets/DGD0211C.pdf">DGD0211C</a></p></li>
<li><p>Gate driver resistors for main switches: two 6.8 Ohms in parallel.</p></li>
<li><p>Transistor for high-side drive: <a class="reference external" href="https://de.rs-online.com/web/p/bipolare-transistoren/8015675?gb=b">PMBTA44,215</a></p></li>
</ul>
<p>Sensors</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span> inductor current sensors: <a class="reference external" href="https://www.mouser.de/ProductDetail/Allegro-MicroSystems/ACS730KLCTR-40AB-T?qs=pUKx8fyJudBionxJgUyS8Q%3D%3D">ACS730KLCTR-40AB-T</a>, +- 40 A</p></li>
<li><p>Input and output current sensors: <a class="reference external" href="https://www.mouser.de/ProductDetail/Allegro-MicroSystems/ACS712ELCTR-20A-T?qs=pUKx8fyJudBUdhIPMFjOBQ%3D%3D">ACS712ELCTR-20A-T</a>, +- 20 A</p></li>
<li><p>Amplifiers: <a class="reference external" href="https://www.microchip.com/en-us/product/mcp6487">MCP6487</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ACS712 current sensors were acquired from Aliexpress. All remaining parts were acquired from Mouser or RS.</p>
</div>
<section id="ltspice-model">
<h3>LTSpice model<a class="headerlink" href="#ltspice-model" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="_downloads/945a3677842d607e03108f50b17aa75b/cuk-iso-prototype.asc"><code class="xref download docutils literal notranslate"><span class="pre">LTSpice</span> <span class="pre">model</span></code></a></p></li>
</ul>
<p>The LTSpice model simulates the power stage of the converter. Most of the parasitics included in the LTSpice model were obtained as maximum values from the datasheet of each part. However, the equivalent series resistance (ESR) of the input and output inductors and of the output capacitor were obtained experimentally.</p>
<p>The values obtained were:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(R_\text{L,1}\)</span>: 42.43 mOhms</p></li>
<li><p><span class="math notranslate nohighlight">\(R_\text{L,2}\)</span>: 10.26 mOhms</p></li>
<li><p><span class="math notranslate nohighlight">\(R_\text{C,o}\)</span>: 131 mOhms</p></li>
</ul>
<p>The ESR of the inductors were obtained by measuring the average voltage across the inductors with a multimeter. Then, the input/output currents were measured, and this was used to determine the ESR. The ESR of the output capacitor was estimated based on its measured voltage ripple and estimated current ripple.</p>
<p>In addition, the connection of the transformer shows a considerable ESR, which was lumped as a single resistor in the primary side of the transformer in the simulation.</p>
<p><a class="reference internal" href="#fig-cuk-iso-prototype-model-val-ltspice-hw-vds"><span class="std std-numref">Fig. 37</span></a> shows the drain-source voltages of the MOSFETs, obtained in LTSpice and experimentally. The waveforms are similar, but the simulation does not capture the magnitude of the ringing on the switches. A comparison at the drain-source voltage of the MOSFETs at the switching instants is shown in <a class="reference internal" href="#fig-cuk-iso-prototype-model-val-ltspice-hw-vds-zoom"><span class="std std-numref">Fig. 38</span></a>.</p>
<figure class="align-center" id="fig-cuk-iso-prototype-model-val-ltspice-hw-vds">
<a class="reference internal image-reference" href="_images/cuk-iso-prototype-model-val-ltspice-hw-vds.svg"><img alt="Vds LTSpice cuk iso" height="558" src="_images/cuk-iso-prototype-model-val-ltspice-hw-vds.svg" width="370" /></a>
<figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">Simulated (top) and experimental (bottom) drain-source voltage of MOSFETs. Yellow: Primary-side MOSFET. Blue: Secondary-side MOSFET.</span><a class="headerlink" href="#fig-cuk-iso-prototype-model-val-ltspice-hw-vds" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="fig-cuk-iso-prototype-model-val-ltspice-hw-vds-zoom">
<a class="reference internal image-reference" href="_images/cuk-iso-prototype-model-val-ltspice-hw-vds-zoom.svg"><img alt="Vds LTSpice cuk iso zoom" height="558" src="_images/cuk-iso-prototype-model-val-ltspice-hw-vds-zoom.svg" width="789" /></a>
<figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">Closer view of the drain-source voltage of the MOSFETs in the simulation (top) and the prototype (bottom). Yellow: Primary-side MOSFET. Blue: Secondary-side MOSFET.</span><a class="headerlink" href="#fig-cuk-iso-prototype-model-val-ltspice-hw-vds-zoom" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>For reference, <a class="reference internal" href="#cuk-iso-prototype-model-val-ltspice-hw-vds-vo"><span class="std std-numref">Fig. 39</span></a> shows the drain-source voltage of the primary-side MOSFET and the output voltage. At the switching instants, there is a considerable transient on the output voltage. This is discussed more in the issues and notes section.</p>
<figure class="align-center" id="cuk-iso-prototype-model-val-ltspice-hw-vds-vo">
<a class="reference internal image-reference" href="_images/cuk-iso-prototype-model-val-ltspice-hw-vds-vo.svg"><img alt="Vds Vo cuk iso" height="274" src="_images/cuk-iso-prototype-model-val-ltspice-hw-vds-vo.svg" width="369" /></a>
<figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">Drain-source voltage of the primary-side MOSFET (yellow) and the output voltage (blue).</span><a class="headerlink" href="#cuk-iso-prototype-model-val-ltspice-hw-vds-vo" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The table below shows steady-state input/output measurements obtained with multimeters. These measurements were obtained with 40% duty-cycle, 70 ns of dead time and switching frequency of 100 kHz. Input and output voltages were measured at the converter’s terminals.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Quantity</p></th>
<th class="head"><p>Simulation</p></th>
<th class="head"><p>Experimental</p></th>
<th class="head"><p>Error (%)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Input voltage</p></td>
<td><p>25.0 V</p></td>
<td><p>25.0 V</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Input current</p></td>
<td><p>5.70 A</p></td>
<td><p>5.52 A</p></td>
<td><p>3.16</p></td>
</tr>
<tr class="row-even"><td><p>Input power</p></td>
<td><p>142.5 W</p></td>
<td><p>138.0 W</p></td>
<td><p>3.16</p></td>
</tr>
<tr class="row-odd"><td><p>Output voltage</p></td>
<td><p>25.6 V</p></td>
<td><p>25.4 V</p></td>
<td><p>0.78</p></td>
</tr>
<tr class="row-even"><td><p>Output current</p></td>
<td><p>4.89 A</p></td>
<td><p>4.85 A</p></td>
<td><p>0.82</p></td>
</tr>
<tr class="row-odd"><td><p>Output power</p></td>
<td><p>125.1 W</p></td>
<td><p>123.2 W</p></td>
<td><p>1.52</p></td>
</tr>
<tr class="row-even"><td><p>Efficiency</p></td>
<td><p>87.8%</p></td>
<td><p>89.3%</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The temperature of the MOSFETs and the snubber was also observed after the converter operated with the power above for a couple of minutes. The measurements are shown in the table below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Part</p></th>
<th class="head"><p>Temperature</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Primary-side MOSFET</p></td>
<td><p>~90ºC</p></td>
</tr>
<tr class="row-odd"><td><p>Primary-side snubber</p></td>
<td><p>~135ºC</p></td>
</tr>
<tr class="row-even"><td><p>Secondary-side MOSFET</p></td>
<td><p>~45ºC</p></td>
</tr>
<tr class="row-odd"><td><p>Secondary-side snubber</p></td>
<td><p>~100ºC</p></td>
</tr>
</tbody>
</table>
</section>
<section id="plecs-model">
<h3>PLECS model<a class="headerlink" href="#plecs-model" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="_downloads/42a46d5e66b40b04d483234905312566/cuk-iso-prototype.plecs"><code class="xref download docutils literal notranslate"><span class="pre">PLECS</span> <span class="pre">model</span></code></a></p></li>
</ul>
<p>The PLECS models above can be used for closed-loop simulation. The model includes ADCs and PWMs. In the simulation, as in the hardware, the PWM is generated based on a triangle carrier, and the measurements are triggered when the carrier reaches its peak value. In this way, the current of the inductors are sampled as its average value. Moreover, using this scheme can reduce switching noise in the measurements.</p>
<p><a class="reference internal" href="#cuk-iso-prototype-model-val-sim-hw"><span class="std std-numref">Fig. 40</span></a> shows a comparison of the step response between the hardware (blue curve) and the PLECS model (red curves). The transient of the currents and the output voltage show more agreement between simulation and hardware. However, the dynamics of the voltage of the coupling capacitors differs more. The dynamics can be tuned in the simulation by changing the ESR of the output capacitor and of the transformer, as well as the magnetizing inductance. Here, these values were kept the same as those of the  LTSpice simulation.</p>
<figure class="align-center" id="cuk-iso-prototype-model-val-sim-hw">
<a class="reference internal image-reference" href="_images/cuk-iso-prototype-model-val-sim-hw.svg"><img alt="Step response hardware simulation" height="681" src="_images/cuk-iso-prototype-model-val-sim-hw.svg" width="511" /></a>
<figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">Comparison between hardware (blue curves) and simulation (red curves).</span><a class="headerlink" href="#cuk-iso-prototype-model-val-sim-hw" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the PLECS model, noise is added to the current measurements. This is because the current measurements are quite noisy in the hardware (as opposed to the voltage measurements, which are quite clean).</p>
<p>The standard deviation that was used to model the noise was obtained from hardware experiments.</p>
</div>
</section>
</section>
<section id="issues-and-notes">
<h2>Issues and notes<a class="headerlink" href="#issues-and-notes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(S_\text{io}\)</span> switch: in the current version of the prototype, a P-channel MOSFET was used to realize this high-side switch. In practice, this didn’t work quite well because the on resistance of the P-channel used was too large. Moreover, to fully drive the MOSFET, a large-ish output voltage was required, which made things more difficult when debugging the converter with low voltages. Thus, in the assembled prototype, this switch as shorted and not used. For future versions, it would be better to use a relay or an N-channel MOSFET with proper driving. To drive this high-side MOSFET, an isolated gate driver with integrated supply could be used, for example the <a class="reference external" href="https://www.ti.com/product/TPSI3052">TPSI3052</a> or the <a class="reference external" href="https://www.infineon.com/cms/de/product/power/solid-state-relay/solid-state-isolators/issi20r11h/">ISSI20R11H</a>. For a next version, however, MOSFETs or relays should definitely be used to isolate the input and output of the converter during adverse conditions. The converter was used in a larger experimental setup with additional converters in parallel, and these input/output switches would’ve helped a lot.</p></li>
<li><p>Snubber: The original snubber turned to be too large. Although it did improve the ringing on the MOSFETs quite also, it was also very lossy and the resistors would get very hot. It was a mistake to use a film capacitor for the snubber, and in the end ceramic capacitors had a much better response. For a next version, the snubber could be designed for two ceramic capacitors and two SMD resistors.</p></li>
<li><p>Filtered measurements: initially, there was a concern regarding switching noise affecting the measurements. For this reason, all measurements have a filtered counterpart, and an additional connector was dedicated for these measurements. The idea was to compare the raw and filtered measurements. However, overall, no significant noise was observed in the raw measurements. Although the raw current measurements is significantly noisier, it was within the levels expected from the current sensors. In a future version, the dedicated connector with filtered measurements can be removed. The raw or filtered signal can be routed to a single measurements connector, and the measurement that goes to the connector can be selected with a jumper. Another option would be to remove these filtered measurements altogether.</p></li>
<li><p>Although it was a good idea at first to split the converter in two boards in order to use different transformers, in the end the same transformer was used and there are not plans to change it. In a future version, the converter could be designed in a single PCB with the transformed already on it. This would for sure improve the transient response and the efficiency, as the external connections through cables introduced a quite large ESR.</p></li>
<li><p>A dead-time of 70 ns seems quite small, but increasing it actually increased losses, and made the ringing on the MOSFETs worse.</p></li>
<li><p>Four output capacitors were planned for the converter, but in the end just one was enough. For a next version, leaving footprint for just two would be more than enough.</p></li>
<li><p>The output voltage shows some oscillations during the switching instants, which are expected, but are too big (see <a class="reference internal" href="#cuk-iso-prototype-model-val-ltspice-hw-vds-vo"><span class="std std-numref">Fig. 39</span></a>). They probably could be improved by placing additional ceramic capacitors in parallel with the main bulk capacitor.</p></li>
</ul>
</section>
<section id="fabrication-files">
<h2>Fabrication files<a class="headerlink" href="#fabrication-files" title="Permalink to this heading"></a></h2>
<p>To get the gerber files used to fabricate the converter, checkout commit <code class="docutils literal notranslate"><span class="pre">7783b334fa4f7df7ff749daa6876e2eef62db06c</span></code>, and find the files under <code class="docutils literal notranslate"><span class="pre">cuk-iso-ps/gerber</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="digital_isolator_6t2r.html" class="btn btn-neutral float-left" title="digital-isolator-6t2r" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pynq_rpi_ph_adapter.html" class="btn btn-neutral float-right" title="pynq-rpi-ph-adapter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Marco Guerreiro.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>